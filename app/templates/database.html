{% extends "template_base" %}

{% block database %}
<div id='table-specs'>
	<span id='table-search'>
		<label for='text'>Search&nbsp;&nbsp;</label>
		<input id='search-input' class='futuristic-input-text' type='text'/>
	</span> 
	&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;&nbsp;&nbsp;&nbsp;
	<span id='table-choice'>
		<select class='futuristic-input-select' id='table-select'>
			<option>Accounts</option>
			<option>Players</option>
			<option>PokerTables</option>
			<option>Actions</option>
		</select>
	</span>
</div>
<div class='content grid-table'>
	<table id='table-repr'></table>
</div>

<script>
	let table_option = $('#table-select');
	let table_repr = $('#table-repr');
	$('#table-select > option').click(function() {
		let option = table_option.find(':selected').text();
		$.ajax('/database', {
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: JSON.stringify({table: option}),
            timeout: 2000,
            success: function (data, status, xhr) {
				table_repr.html('<tr>');
				data.columns.forEach(function(x) {
					table_repr.append('<th>' + x + '</th>');
				});
				table_repr.append('</tr>');
				data.rows.forEach(function(row) {
					table_repr.append('<tr>');
					row.forEach(function (td) {
						table_repr.append('<td>' + td + '</td');
					});
					table_repr.append('</tr>');
				});
			},
            error: function (jqXhr, textStatus, errorMessage) {
				console.log("Error");
			},
		});
	});
</script>
{% endblock %}